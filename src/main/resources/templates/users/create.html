<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Formulario</title>
</head>
<body>
    <h1>Formulario de Usuarios</h1>
    <form th:action="@{/createUser}" th:object="${user}"  method="post">
        <div class="form-group">
            <label for="name">Nombres:</label>
            <input th:field="*{name}" id="name" placeholder="Escribe el nombre del usuario" type="text" class="form-control" required />
            <p th:if="${#fields.hasErrors('name')}" th:errors="*{name}"></p>
            <br/>
        </div>
        <div class="form-group">
            <label for="lastName">Apellidos:</label>
            <input th:field="*{lastName}" id="lastName" placeholder="Escribe el apellido del usuario" type="text" class="form-control" required />
            <p th:if="${#fields.hasErrors('lastName')}" th:errors="*{lastName}"></p>
            <br/>
        </div>
        <div class="form-group">
            <label for="email">Correo:</label>
            <input th:field="*{email}" id="email" placeholder="ejemplo@ejemplo.com" type="email" class="form-control" required />
            <p th:if="${error}" th:text="${error}" style="color: red;"></p>
            <br/>
        </div>
        <div class="form-group">
            <label for="phone">Teléfono:</label>
            <input th:field="*{phone}" id="phone" placeholder="999-999-999" type="tel" class="form-control">
            <p th:if="${#fields.hasErrors('phone')}" th:errors="*{phone}"></p>
            <br/>
        </div>
        <div class="form-group">
            <label for="fechNac">Fecha Nacimiento:</label>
            <input th:field="*{fechNac}" id="fechNac" type="date" class="form-control" required />
            <p th:if="${#fields.hasErrors('fechNac')}" th:errors="*{fechNac}"></p>
            <br/>
        </div>
        <div class="form-group">
            <label for="address">Dirección:</label>
            <input th:field="*{address}" id="address" placeholder="Escribe la dirección" type="text" class="form-control" />
            <p th:if="${#fields.hasErrors('address')}" th:errors="*{address}"></p>
            <br/>
        </div>
        <button class="btn btn-success" type="submit">Agregar Usuario</button>
    </form>
    <h2 th:text="${message}"></h2>
    <div th:if= "${users.isEmpty()}">
        <p>No hay usuarios registrados</p>
    </div>
    <ul th:if= "${!users.isEmpty()}">
        <li th:each= "item:${users}">
            <span th:text="${item.name}"></span><span th:text="${item.lastName}"></span><span th:text="${item.email}"></span><span th:text="${item.phone}"></span><span th:text="${item.fechNac}"></span><span th:text="${item.address}"></span>
        </li>
    </ul>
    <a href="/showUsers">Ver Tabla de Usuarios</a>
</body>
</html>